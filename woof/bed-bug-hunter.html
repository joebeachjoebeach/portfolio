<!DOCTYPE html>
<meta name="robots" content="noindex">
<html>
<head>
<meta name="description" content="Bed Bug Hunter">
<script src="https://cdn.rawgit.com/stevekrouse/WoofJS/7c5bc09cb9ec5b1e799111bb92842f1c7acce2b5/woof.js"></script>
<script type="text/javascript" src="js/bedbug-hunter.js"></script>
<link rel="icon" href="../media/favicon.ico">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bed Bug Hunter</title>
</head>
<body>

<script>
// Bed Bug Hunter


//spawns the bug anywhere outside of the infoBox
function respawn(sprite) {
	sprite.x = randomX();
	sprite.y = randomY();
	if (sprite.touching(infoBox)) {
		respawn(sprite);
	};
};

setBackdropURL("../media/bed-bug-hunter-quilt.jpg");

var playBox = new Rectangle({
	color: "#50AA55",
	width: 125,
	height: 35,
	y: 5,
	showing: true,
});

var playText = new Text({
	text: "Click to Play",
	size: 18,
	color: "#FFF",
	fontFamily: "verdana",
	textAlign: "center",
	showing: true,
});

var infoBox = new Rectangle({
	color: "#444",
	height: 200,
	width: 350,
	x: minX + 10,
	y: maxY - 20,
	showing: false,
});

var scoreNumber = 0;

var score = new Text({
	text: () => "Score: " + scoreNumber,
	size: 18,
	color: "#FFF",
	textAlign: "left",
	x: minX + 20,
	y: maxY - 20,
	showing: false,
});

var timerNumber = 30;

var timer = new Text({
	text: () => "Time Left: " + timerNumber,
	size: 18,
	color: "#FFF",
	textAlign: "left",
	x: minX + 20,
	y: maxY - 50,
	showing: false,
});

var instructions = new Text({
	text: "Catch the Bed Bug!",
	size: 14,
	color: "#F22",
	fontFamily: "verdana",
	textAlign: "left",
	x: minX + 10,
	y: maxY - 80,
	showing: false,
});

var gameOver = new Text({
	text: "Game Over!",
	size: 14,
	color: "#F22",
	fontFamily: "verdana",
	textAlign: "left",
	x: minX + 35,
	y: maxY - 95,
	showing: false,
});

var pressSpace = new Text({
	text: "Press SPACE to play again!",
	size: 11,
	color: "#F22",
	fontFamily: "verdana",
	textAlign: "left",
	x: minX + 20,
	y: maxY - 110,
	showing: false,
});

var bedBug = new Image({
	url: "../media/bed-bug-hunter-bug.png",
	width: 65,
	height: 55,
	showing: false,
});

var dog = new Image({
	url: "../media/bed-bug-hunter-roscoe.png",
	width: 100,
	height: 100,
	showing: false,
});

//start game when PLAY is clicked
playBox.onMouseDown(() => {
	
	playBox.showing = false;
	playText.showing = false;
	infoBox.showing = true;
	instructions.showing = true;
	score.showing = true;
	timer.showing = true;
	dog.x = randomX();
	dog.y = randomY();
	dog.showing = true;
	respawn(bedBug);
	bedBug.showing = true;
	
	//key inputs
	forever(() => {
		
		//hide instructions when any key is pressed
		if (keysDown.length > 0) {
			instructions.showing = false;
		};
		
		//dog movement
		if (keysDown.includes("LEFT")) {
			dog.x -= 10;
			if (dog.x < minX) {
				dog.x = maxX;
			};
		};
		
		if (keysDown.includes("RIGHT")) {
			dog.x += 10;
			if (dog.x > maxX) {
				dog.x = minX;
			};
		};
		
		if (keysDown.includes("UP")) {
			dog.y += 10;
			if (dog.y > maxY) {
				dog.y = minY;
			};
		};
		
		if (keysDown.includes("DOWN")) {
			dog.y -= 10;
			if (dog.y < minY) {
				dog.y = maxY;
			};
		};		
	});
	
	//scoring, ending, and restarting
	forever(() => {
		
		//increase score and move bed bug on touch
		if (bedBug.touching(dog)) {
			respawn(bedBug);
			scoreNumber ++;
		};
		
		//stop the game when timer ends
		if (timerNumber < 1) {
			gameOver.showing = true;
			pressSpace.showing = true;
			dog.showing = false;
			bedBug.showing = false;
		};
		
		//when game is over, restart with SPACE
		if (gameOver.showing && keysDown.includes("SPACE")) {
			timerNumber = 30;
			scoreNumber = 0;
			gameOver.showing = false;
			pressSpace.showing = false;
			respawn(bedBug);
			bedBug.showing = true;
			dog.showing = true;
		};
	});
	
	//countdown timer
	every(1, "seconds", () => {
		timerNumber --;
		if (timerNumber <= 0) {
			timerNumber = 0;
		};
	});	
});
</script>
</body>
</html>